package com.huylq.thaotool.controller;

import com.huylq.thaotool.model.Article;
import com.huylq.thaotool.service.ScraperService;
import lombok.AccessLevel;
import lombok.RequiredArgsConstructor;
import lombok.experimental.FieldDefaults;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController
@RequiredArgsConstructor
@FieldDefaults(level = AccessLevel.PRIVATE,  makeFinal = true)
public class ScraperController {

  ScraperService scraperService;

  @PostMapping("/scrape")
  public List<Article> getHeadlines() {
    return scraperService.scrapeArticle();
  }

  @GetMapping("/display-test")
  public String displayTest(){
    return "<p>Nhà Trắng ngày 29/9 công bố kế hoạch 20 điểm có thể giúp chấm dứt cuộc xung đột đã kéo dài gần hai năm ở Gaza, giải cứu các con tin trong tay Hamas, đồng thời định hình tương lai của vùng lãnh thổ của người Palestine. Tổng thống Donald Trump nói kế hoạch nhận được sự đồng tình từ nhiều quốc gia.</br>Theo truyền thông Mỹ, Nhà Trắng xây dựng kế hoạch 20 điểm với tư vấn từ cựu thủ tướng Anh Tony Blair. Jared Kushner, con rể Tổng thống Trump, cố vấn về Trung Đông trong nhiệm kỳ đầu của ông, cũng góp sức. Cùng với đó, đặc phái viên Mỹ về Trung Đông Steve Witkoff đã dẫn đầu nỗ lực ngoại giao với các nước Arab để trao đổi ý tưởng, nhằm đảm bảo kế hoạch khả thi nhất có thể.</br>Nỗ lực bắt đầu khoảng một tháng trước, khi ông Witkoff hé lộ chính quyền Mỹ đang chuẩn bị một kế hoạch toàn diện nhằm chấm dứt chiến sự Israel - Hamas. Ông Witkoff cho biết Tổng thống Trump chuẩn bị chủ trì một cuộc họp quy mô lớn về kế hoạch này tại Nhà Trắng.</br>Cuộc họp này kết thúc mà không có dấu hiệu nào cho thấy sự kiện có thể làm thay đổi cục diện. Cựu thủ tướng Blair và Kushner đều có tên trong danh sách khách mời. Đại diện Israel tham gia là Bộ trưởng Các vấn đề chiến lược Ron Dermer.</br>Ông Blair khi đó đã vạch ra tầm nhìn riêng về Gaza thời hậu chiến từ hơn một năm trước, nhưng ý tưởng không được chú ý nhiều dưới thời chính quyền Joe Biden. Thông tin rò rỉ cho thấy ông Blair đề xuất Gaza sẽ được quản lý bởi một cơ chế ủy trị quốc tế. Đề xuất này khiến các quan chức châu Âu và Arab lo ngại rằng người Palestine có thể bị gạt ra rìa.</br>Ông Blair đã tham vấn Kushner. Con rể ông Trump không giữ vị trí nào trong chính quyền hiện tại, nhưng có quan hệ làm ăn thân thiết với giới lãnh đạo Vùng Vịnh.</br>Thủ tướng Israel Benjamin Netanyahu khi đó không thể hiện dấu hiệu nào cho thấy ông mong muốn một kế hoạch hòa bình hay phải chịu sức ép từ Mỹ. Ông vẫn kiên định với tuyên bố sẽ đánh bại hoàn toàn Hamas, đồng thời phát động chiến dịch vào Gaza City, nhằm tiếp quản thành phố lớn nhất Dải Gaza, bất chấp làn sóng phản đối quốc tế trước tình hình nhân đạo nghiêm trọng.</br>Ở hậu trường, các nhà ngoại giao bắt đầu bàn luận về kế hoạch Kushner - Blair.</br>Các quốc gia Arab đã đưa ra những đề xuất của riêng họ, sau khi bị bất ngờ trước tuyên bố hồi tháng 2 của ông Trump rằng nên di tản người Palestine khỏi Gaza và phát triển dải đất thành Riviera của Trung Đông. Tuy nhiên, khối Arab không đề cập đến vấn đề gai góc là giải giáp Hamas, do đó không có cơ hội được chính phủ cực hữu của ông Netanyahu chấp nhận.</br>Trong lúc này, Anh đang phối hợp với Pháp về kế hoạch kêu gọi thành lập ủy ban Palestine để điều hành Gaza như các nước Arab đề xuất, triển khai một lực lượng ổn định quốc tế và giải giáp Hamas.</br>Về phía chính phủ Israel, cuộc họp của Nhà Trắng hồi tháng 8 khiến nhiều người lo ngại, khi ông Trump dường như chuyển sự chú ý trở lại Trung Đông vì nỗ lực chấm dứt chiến sự Nga - Ukraine không có tiến triển.</br>Tâm thế chung là hướng tới chấm dứt chiến sự. Israel đối mặt áp lực phải sớm kết thúc nó, một nguồn thạo tin nói với FT.</br>Khi các lãnh đạo thế giới tập hợp tại New York tuần cuối tháng 9 dự kỳ họp Đại hội đồng Liên Hợp Quốc, làn sóng chỉ trích từ cộng đồng quốc tế với Israel đã gia tăng. Các đồng minh phương Tây như Anh, Pháp, Australia và Canada tuyên bố công nhận Nhà nước Palestine.</br>Các tiểu vương quốc Arab Thống nhất (UAE) cảnh báo Hiệp ước Abraham giúp bình thường hóa quan hệ với Israel năm 2020 bị đe dọa vì Tel Aviv muốn sáp nhập Bờ Tây. Khối Arab còn phẫn nộ vì Israel ngày 9/9 phóng tên lửa vào thủ đô Doha, Qatar, nhằm vào quan chức Hamas khi họ đang họp để thảo luận về đề xuất ngừng bắn của ông Witkoff.</br>Tổng thống Trump cũng tỏ ra khó chịu với Thủ tướng Netanyahu, nói ông rất không hài lòng khi Qatar, đồng minh then chốt của Mỹ, bị nhắm mục tiêu.</br>Các kế hoạch cho một thỏa thuận hòa bình đã được chuẩn bị từ khá lâu, với nhiều phiên bản khác nhau. Nhưng cú hích lớn thực sự là vụ tấn công vào Doha, một quan chức Arab cho biết.</br>Khi các lãnh đạo Arab đến New York, họ đã có chuẩn bị để thúc đẩy Tổng thống Trump lần nữa và trình bày rõ những điều mà người Palestine và khu vực có thể chấp nhận.</br>Trước cuộc gặp với ông Trump hôm 23/9, họ đã gửi cho Nhà Trắng danh sách 6 điểm, trong đó ngoài chấm dứt chiến sự còn có không để Israel chiếm đóng Gaza hay xây dựng khu định cư người Do Thái tại đây, không cưỡng chế người Gaza di dời, không sáp nhập Bờ Tây và không để Israel thực hiện bất kỳ bước đi nào nhằm thay đổi thực trạng Jerusalem.</br>Các lãnh đạo Arab chỉ ra rằng bất cứ động thái nào của Israel nhằm sáp nhập Bờ Tây cũng sẽ đe dọa Hiệp ước Abraham, thành tựu đối ngoại của Tổng thống Trump trong nhiệm kỳ đầu. Ông Trump đảm bảo sẽ không để chuyện sáp nhập này xảy ra.</br>Khối Arab thúc đẩy để Chính quyền Palestine, đang quản lý Bờ Tây, có vai trò lớn hơn ở Gaza thời hậu chiến. Nhìn chung, các lãnh đạo rời cuộc gặp dài hơn một giờ với ông Trump với sự lạc quan chưa từng thấy suốt nhiều tháng. Một số cố vấn cấp cao và thành viên nội các của ông Trump cũng dự họp.</br>Một quan chức Arab khác mô tả cuộc gặp là hết sức hiệu quả và mang tính quyết định.</br>Ông ấy đồng ý với những quan điểm mà các trưởng đoàn của chúng tôi đưa ra, rằng cuộc chiến phải chấm dứt, cần có lệnh ngừng bắn ngay, Gaza phải được tái thiết và người Palestine cần có một viễn cảnh chính trị, người này nói. Chính quyền Mỹ hiện tại có rất nhiều điểm tích cực, dù cũng có vấn đề đòi hỏi ngoại giao khéo léo. Nhưng mặt tích cực là họ ra quyết định nhanh chóng.</br>Ông Trump đã chỉ thị đặc phái viên Witkoff và Ngoại trưởng Marco Rubio tổ chức các cuộc gặp tiếp theo với quan chức Arab để bàn thảo chi tiết.</br>Toàn bộ kế hoạch được soạn thảo chỉ trong vòng ba ngày, quan chức Arab cho biết.</br>Đà tiến triển này khiến các đồng minh khác của Mỹ bất ngờ. Anh và Pháp lên kế hoạch gặp các quan chức Mỹ và Arab ngày 24/9 để tìm kiếm sự ủng hộ từ ông Trump đối với 8 nguyên tắc chấm dứt chiến sự và tái thiết Gaza hậu chiến. Nhưng diễn biến thực tế đã vượt xa kế hoạch này.</br>Thủ tướng Netanyahu lúc này còn chưa có mặt ở New York. Khi lên bục phát biểu tại Liên Hợp Quốc ngày 26/9, ông vẫn khẳng định Israel sẽ hoàn tất nhiệm vụ loại bỏ Hamas ở Gaza và sẽ không bao giờ chấp nhận việc thành lập Nhà nước Palestine.</br>Tuy nhiên, một quan chức Israel cho biết phái đoàn Israel tại Mỹ có lo ngại và rối bời, ám chỉ rằng các lãnh đạo Arab đã thuyết phục được ông Trump ủng hộ một kế hoạch đi ngược lại lập trường của Tel Aviv. Ông Netanyahu và Dermer đã hội ý với Witkoff và Kushner ít nhất ba lần tại khách sạn mà lãnh đạo Israel nghỉ tại New York trong cuối tuần để thu hẹp bất đồng.</br>Witkoff nói với Fox News rằng ông và Kushner làm việc suốt cuối tuần cho vấn đề này và vì thế, phía Israel đã đồng thuận.</br>Sau cùng, kế hoạch 20 điểm của ông Trump tích hợp nhiều đề xuất, từ ủy ban của Palestine, lực lượng ổn định và lập cơ quan giám sát quốc tế mà Tổng thống Mỹ là chủ tịch.</br>Tại buổi họp báo chung với Thủ tướng Netanyahu sau cuộc gặp hôm 29/9 ở Nhà Trắng, Tổng thống Trump chính thức công bố kế hoạch. Ông gọi cựu thủ tướng Blair là một người tốt, sẽ tham gia Hội đồng Hòa bình, cơ quan giám sát ủy ban Palestine trong quá trình điều hành Gaza.</br>Lãnh đạo Israel thể hiện sự ủng hộ một cách thận trọng, cảnh báo Tel Aviv sẽ tự mình hoàn tất công việc nếu Hamas từ chối kế hoạch hoặc giả bộ chấp thuận. Thủ tướng Netanyahu cảm ơn ông Kushner và ông Witkoff vì đã nỗ lực không mệt mỏi để đưa Israel, các quốc gia Arab và khu vực lại gần nhau hơn.</br>Nguồn thạo tin nói Thủ tướng Netanyahu chấp nhận kế hoạch vì không còn lựa chọn khác.</br>Bạn có thể thấy rõ điều đó trên gương mặt ông ấy, người này nói, nhưng cũng lưu ý ông Netanyahu đạt được hầu hết những gì mong muốn, ngoại trừ việc kế hoạch có nhắc đến khả năng thành lập Nhà nước Palestine.</br>Hamas tuyên bố sẵn sàng thả con tin theo thỏa thuận hòa bình do ông Trump đề xuất, nhưng muốn đàm phán thêm về chi tiết cũng như về tiếng nói trong tương lai của Dải Gaza.</br>Đòn bẩy then chốt đối với ông Netanyahu, đối với chính phủ Israel, chính là Mỹ, một quan chức Arab cho biết. Nếu Hamas hoặc Israel làm đổ bể kế hoạch, tôi cho rằng Mỹ cần buộc họ phải chịu trách nhiệm về điều đó.</br></p>";
  }
}
